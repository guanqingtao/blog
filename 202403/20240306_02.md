## 和总监们一起聊聊数据库三害    
                                                                        
### 作者                                                                        
digoal                                                                        
                                                                        
### 日期                                                                        
2024-03-06                                                                 
                                                                        
### 标签                                                                        
PostgreSQL , PolarDB , DuckDB , 数据库三害                       
                                                                        
----                                                                        
                                                                        
## 背景      
  
《周处除三害》是最近非常火的片子, 题材背后的典故是说少年周处身形魁梧，武力高强，却横行乡里，为邻人所厌。后周处只身斩杀猛虎孽蛟，他自己也浪子回头、改邪归正，至此三害皆除。  
  
电影故事并不复杂，甚至可以说是很简单，阮经天饰演的通缉犯陈桂林看到自己在通缉令上位列“榜三”，决定整死“榜一”和“榜二”两名大哥扬名立万。电影试图讲述一个“痴”杀掉“贪”与“嗔”后，最终觉醒后，心中的恶得以清除的故事。  
  
最近很多优秀的公众号也掀起了一阵聊“数据库三害”的热潮, 由于大家所处的环境不同, 对应的“三害”也会有不一样的理解. 例如  
  
PG社区前前主席萧老师从数据库产品厂商角度：  
- 1、全能的通用型数据库：盲目求大求全，结果什么都没做好  
- 2、胡乱鼓吹新名词：概念PPT满天飞，能力还没有发布就先售卖  
- 3、做产品变成做项目：特性没有延续性，东一枪西一炮  
  
京东方邦德老师从用户角度分享的《数据库安全主要面临的三害》 https://mp.weixin.qq.com/s/rkqnGpzmFJxe9kfm1LF1ag:   
- 1、黑客勒索之害、  
- 2、特权滥用权限之害、  
- 3、数据库安全漏洞之害  
  
阿里云PolarDB灭掉的主要三害:   
- 1、弹性不够. 通过计算存储分离架构, 实现了基于共享块设备的存储、计算可快速横向伸缩的能力. 通过MPP调动多计算节点处理大量数据复杂分析业务, 实现HTAP能力.   
- 2、成本高. 共享存储实现一份存储多个实例, 增加只读实例速度快(不需要复制数据)、延迟低(不需要回放WAL), 大幅度降低了读多写少业务场景的成本.   
- 3、易用性. 通过proxy解决了读写分离对业务不透明带来的开发繁复性. proxy利用只读实例的低延迟和私有通讯协议实现解决读写分离带来的全局事务一致性问题.   
  
还有海文兄弟, 他的公众号已经蓄势待发.    
  
本期每周公开卡和老陈聊数据库的直播我打算插播一期, 和各位总监一起聊一聊数据库三害.    
  
![pic](20240306_02_pic_001.jpg)  
  
## 更多参考阅读   
1、为什么系列  
- [《为什么磁盘RT会严重影响vacuum垃圾回收效率?》](../202202/20220216_01.md)    
- [《为什么高并发数据写入吞吐无法达到磁盘极限-1》](../202202/20220214_01.md)    
- [《为什么GIS时空查询即耗CPU又费IO?》](../202201/20220120_01.md)    
- [《为什么做检查点会导致性能抖动?》](../202201/20220119_02.md)    
- [《为什么创建索引慢?》](../202201/20220118_05.md)    
- [《为什么只读实例延迟高?》](../202201/20220117_01.md)    
- [《为什么SQL不能动态分组计算?》](../202201/20220111_01.md)    
- [《为什么木桶有短板?》](../202201/20220110_03.md)    
- [《为什么增加只读实例不能提高单条SQL的执行速度?》](../202201/20220110_01.md)    
- [《为什么实例越大备份与恢复越难?》](../202201/20220105_01.md)    
- [《为什么数据库重启或崩溃恢复后性能可能瞬间很差?》](../202201/20220104_03.md)    
- [《为什么经常使用临时表时建议使用全局临时表?》](../202201/20220104_02.md)    
- [《为什么存储RT指标对实例性能影响很大?》](../202201/20220104_01.md)    
- [《为什么数据库越大崩溃恢复越慢?》](../202112/20211230_04.md)    
- [《为什么failover后逻辑复制会丢数据?》](../202112/20211230_03.md)    
- [《为什么PG有Double Cache?》](../202112/20211230_02.md)    
- [《为什么增加RO节点动则数小时?》](../202112/20211230_01.md)    
- [《为什么不能无限增加只读实例?》](../202112/20211229_02.md)    
- [《为什么FPW是以牺牲(性能、存储空间、稳定性)换取的可靠性?》](../202112/20211228_02.md)    
- [《为什么通常扩容需要停机?》](../202112/20211228_01.md)    
  
2、吐槽系列  
- [《DB吐槽大会,第86期 - PG 优化器 incremental sort , merge sort , query rewrite 支持场景有限》](../202306/20230613_02.md)    
- [《DB吐槽大会,第85期 - PG 并发写带来的buffer table锁冲突面不可设置》](../202305/20230510_03.md)    
- [《DB吐槽大会,第84期 - PG逻辑备份释放对象元数据共享锁不及时》](../202305/20230510_02.md)    
- [《DB吐槽大会,第83期 - PG无法PITR恢复到物理全量备份过程中的时刻》](../202305/20230510_01.md)    
- [《DB吐槽大会,第82期 - 自动驾驶, 服务降级和限流保护功能缺失》](../202210/20221022_01.md)    
- [《DB吐槽大会,第81期 - PG 未针对 NUMA 优化》](../202110/20211026_05.md)    
- [《DB吐槽大会,第80期 - PG 不支持透明加密(TDE)功能》](../202110/20211009_07.md)    
- [《DB吐槽大会,第79期 - PG standby不支持配置多个上游节点》](../202110/20211009_06.md)    
- [《DB吐槽大会,第78期 - PG 不支持绕过shared buffer的查询和写入》](../202110/20211009_05.md)    
- [《DB吐槽大会,第77期 - PG 不支持索引随机采样》](../202110/20211009_04.md)    
- [《DB吐槽大会,第76期 - PG 不支持共享存储多活架构》](../202110/20211009_03.md)    
- [《DB吐槽大会,第75期 - PG 不支持索引失效功能》](../202110/20211009_02.md)    
- [《DB吐槽大会,第74期 - PG 不支持SQL维度资源限流》](../202110/20211009_01.md)    
- [《DB吐槽大会,第73期 - PG 统计信息无法迁移》](../202110/20211004_03.md)    
- [《DB吐槽大会,第72期 - PG wal 联网协议不够发达》](../202110/20211004_01.md)    
- [《DB吐槽大会,第71期 - PG pg_stat_statements缺乏p99, p95的指标》](../202110/20211002_05.md)    
- [《DB吐槽大会,第70期 - PG 不支持update | delete skip locked, nowait语法》](../202110/20211002_04.md)    
- [《DB吐槽大会,第69期 - PG 不支持update | delete limit语法》](../202110/20211002_03.md)    
- [《DB吐槽大会,第68期 - PG server less场景下的quota控制灵活性较弱》](../202110/20211002_02.md)    
- [《DB吐槽大会,第67期 - PG 存储过程和函数内对自治事务支持不完整》](../202110/20211002_01.md)    
- [《DB吐槽大会,第66期 - PG 缺乏更简单的数据热插拔能力》](../202109/20210930_04.md)    
- [《DB吐槽大会,第65期 - PG 没有内置进程池》](../202109/20210930_03.md)    
- [《DB吐槽大会,第64期 - PG 里面的某些单核瓶颈》](../202109/20210930_02.md)    
- [《DB吐槽大会,第63期 - PG 缺乏跨版本兼容性评估工具》](../202109/20210929_08.md)    
- [《DB吐槽大会,第62期 - PG 不支持index skip scan》](../202109/20210929_07.md)    
- [《DB吐槽大会,第61期 - PG 审计功能有巨大增强空间》](../202109/20210929_06.md)    
- [《DB吐槽大会,第60期 - PG 只读实例不支持写操作》](../202109/20210929_05.md)    
- [《DB吐槽大会,第59期 - PG 缺少便捷的坏块修复能力》](../202109/20210929_04.md)    
- [《DB吐槽大会,第58期 - PG 复杂JOIN优化器有巨大提升空间》](../202109/20210929_03.md)    
- [《DB吐槽大会,第57期 - PG multi-master 支持不友好》](../202109/20210929_01.md)    
- [《DB吐槽大会,第56期 - PG 分析场景IO消耗较大, 计算有巨大性能提升空间》](../202109/20210928_08.md)    
- [《DB吐槽大会,第55期 - PG SQL无法穿越》](../202109/20210928_07.md)    
- [《DB吐槽大会,第54期 - PG 资源隔离、管理手段较少》](../202109/20210928_06.md)    
- [《DB吐槽大会,第53期 - PG 函数和存储过程没有版本管理》](../202109/20210928_05.md)    
- [《DB吐槽大会,第52期 - PG 函数和存储过程内容不支持加密》](../202109/20210928_04.md)    
- [《DB吐槽大会,第51期 - 缺乏SQL审查功能》](../202109/20210928_03.md)    
- [《DB吐槽大会,第50期 - PG GiST距离排序操作符和过滤无法同时使用索引》](../202109/20210928_02.md)    
- [《DB吐槽大会,第49期 - PG 不支持打印慢SQL锁等待信息》](../202109/20210922_04.md)    
- [《DB吐槽大会,第48期 - PG 性能问题发现和分析能力较弱》](../202109/20210922_03.md)    
- [《DB吐槽大会,第47期 - PG 崩溃恢复能快点吗》](../202109/20210915_07.md)    
- [《DB吐槽大会,第46期 - PG copy不能跳过错误行》](../202109/20210915_06.md)    
- [《DB吐槽大会,第45期 - PG 不支持rotate表》](../202109/20210915_05.md)    
- [《DB吐槽大会,第44期 - PG 同步复制不支持自动升降级》](../202109/20210915_04.md)    
- [《DB吐槽大会,第43期 - PG 倒排索引启动和recheck代价高》](../202109/20210915_03.md)    
- [《DB吐槽大会,第42期 - PG 读写分离不友好》](../202109/20210915_02.md)    
- [《DB吐槽大会,第41期 - 无法预测大查询剩余执行时间》](../202109/20210910_01.md)    
- [《DB吐槽大会,第40期 - PG 缺少qps计数器》](../202109/20210909_03.md)    
- [《DB吐槽大会,第39期 - PG 物化视图不支持基于log的增量刷新》](../202109/20210908_03.md)    
- [《DB吐槽大会,第38期 - PG 不能自动创建(扩展)分区》](../202109/20210908_02.md)    
- [《DB吐槽大会,第37期 - PG 没有block级增量备份恢复》](../202109/20210907_01.md)    
- [《DB吐槽大会,第36期 - PG 没有官方插件市场》](../202109/20210904_05.md)    
- [《DB吐槽大会,第35期 - "富人"的烦恼?PG 不会自动选择索引类型》](../202109/20210904_01.md)    
- [《DB吐槽大会,第34期 - PG 全局catalog全局可见》](../202109/20210903_10.md)    
- [《DB吐槽大会,第33期 - PG 逻辑复制不支持DDL》](../202109/20210903_09.md)    
- [《DB吐槽大会,第32期 - PG 没有全局索引》](../202109/20210903_08.md)    
- [《DB吐槽大会,第31期 - PG 不支持分区索引》](../202109/20210903_07.md)    
- [《DB吐槽大会,第30期 - PG 某些敏感信息未隐藏》](../202109/20210903_06.md)    
- [《DB吐槽大会,第29期 - PG 表空间容易达到文件系统天花板》](../202109/20210903_05.md)    
- [《DB吐槽大会,第28期 - PG 每次只扩展1个block》](../202109/20210903_03.md)    
- [《DB吐槽大会,第27期 - PG 单一 block size》](../202109/20210903_02.md)    
- [《DB吐槽大会,第26期 - PG 没有基于角色权限的ACL控制》](../202109/20210903_01.md)    
- [《DB吐槽大会,第25期 - PG 不支持物理Partial Standby》](../202109/20210902_13.md)    
- [《DB吐槽大会,第24期 - PG 不支持Partial PITR》](../202109/20210902_12.md)    
- [《DB吐槽大会,第23期 - PG 不支持在线split, merge分区》](../202109/20210902_11.md)    
- [《DB吐槽大会,第22期 - PG 不支持libpq协议层压缩》](../202109/20210902_10.md)    
- [《DB吐槽大会,第21期 - PG 没有持久化Shared Buffer》](../202109/20210902_09.md)    
- [《DB吐槽大会,第20期 - PG pg_upgrade大版本升级不支持增量》](../202109/20210902_08.md)    
- [《DB吐槽大会,第19期 - PG 没有block level压缩》](../202109/20210902_07.md)    
- [《DB吐槽大会,第18期 - PG 索引无版本信息》](../202109/20210902_06.md)    
- [《DB吐槽大会,第17期 - PG 不支持online DDL》](../202109/20210902_05.md)    
- [《DB吐槽大会,第16期 - PG Standby不支持解析逻辑日志》](../202109/20210902_04.md)    
- [《DB吐槽大会,第15期 - PG 没有全局临时表》](../202109/20210902_03.md)    
- [《DB吐槽大会,第14期 - 只读实例是孤岛》](../202109/20210902_02.md)    
- [《DB吐槽大会,第13期 - PG 膨胀收缩之痛》](../202108/20210831_02.md)    
- [《DB吐槽大会,第12期 - 没有自动成本校准器》](../202108/20210830_03.md)    
- [《DB吐槽大会,第11期 - FPW | Double Write》](../202108/20210830_02.md)    
- [《DB吐槽大会,第10期 - 不支持 flashback query》](../202108/20210830_01.md)    
- [《DB吐槽大会,第9期 - PG 大量连接写小事务性能差》](../202108/20210828_09.md)    
- [《DB吐槽大会,第8期 - PG 高并发短连接性能差》](../202108/20210828_08.md)    
- [《DB吐槽大会,第7期 - PG slot 无failover》](../202108/20210828_07.md)    
- [《DB吐槽大会,第6期 - PG Double Cache》](../202108/20210828_06.md)    
- [《DB吐槽大会,第5期 - PG local memory》](../202108/20210828_04.md)    
- [《DB吐槽大会,第4期 - PG 逻辑日志只有全局开关》](../202108/20210826_02.md)    
- [《DB吐槽大会,第3期 - share nothing RO》](../202108/20210825_03.md)    
- [《DB吐槽大会,第2期 - PG 32位xid》](../202108/20210824_01.md)    
- [《DB吐槽大会,第1期 - PG MVCC》](../202108/20210823_07.md)    
- [《DB吐槽大会 - 视频回放汇总》](../202108/20210823_05.md)    
  
  
  
#### [期望 PostgreSQL|开源PolarDB 增加什么功能?](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216")
  
  
#### [PolarDB 开源数据库](https://openpolardb.com/home "57258f76c37864c6e6d23383d05714ea")
  
  
#### [PolarDB 学习图谱](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
  
  
#### [购买PolarDB云服务折扣活动进行中, 55元起](https://www.aliyun.com/activity/new/polardb-yunparter?userCode=bsb3t4al "e0495c413bedacabb75ff1e880be465a")
  
  
#### [PostgreSQL 解决方案集合](../201706/20170601_02.md "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [德哥 / digoal's Github - 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
#### [About 德哥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")
  
  
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
